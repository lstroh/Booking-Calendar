# File Analysis: `css/calendar.css`

This document provides a detailed analysis of the `css/calendar.css` file, which is the primary stylesheet for the front-end Booking Calendar.

## High-Level Overview

This file is the foundational stylesheet for the front-end booking calendar that site visitors interact with. It is responsible for the core structure, layout, and default appearance of the calendar grid, including the date cells, navigation arrows, and legend. It does not define the specific colors or "skin" of the calendar, but rather provides the essential, underlying layout that the various skin files then customize.

Architecturally, this is a modern and sophisticated stylesheet. It heavily utilizes CSS Flexbox for creating a responsive multi-month grid, employs CSS Custom Properties for basic theming, and even uses advanced features like `@container` queries and `aspect-ratio` to ensure the calendar is robust and displays well in any context, from a wide page to a narrow sidebar.

## Detailed Explanation

This is a purely presentational CSS file and contains no PHP or JavaScript logic. Its functionality is delivered entirely through CSS selectors that target the HTML generated by the plugin's front-end rendering engine.

-   **Flexbox-based Grid Layout**: The core of the calendar's layout is built with CSS Flexbox, not traditional HTML tables. 
    -   `.datepick-inline`: The main calendar container uses `display: flex` and `flex-flow: row wrap` to allow multiple month blocks to sit side-by-side and wrap to the next line on smaller screens.
    -   `.datepick-one-month`: Each individual month block is a flex item. Its `flex-basis` is set dynamically with classes like `.months_num_in_row_3` (which sets `flex: 1 1 33.333%`) to create a responsive grid.

-   **Modern CSS for Responsiveness & Sizing**:
    -   **`aspect-ratio`**: The file uses `aspect-ratio: 1 / 1;` on `.datepick-days-cell`. This is a modern CSS property that ensures each date cell is perfectly square, regardless of its width, which is ideal for a calendar layout.
    -   **`@container` Queries**: In a particularly advanced technique, the file uses container queries (`@container wpbc_c__datepick-one-month (inline-size < 140px)`). This allows the font size inside a single month to shrink gracefully if the calendar is placed in a very narrow container (like a sidebar), independent of the overall browser window's width. This is more robust than standard media queries.

-   **Check-in/Check-out Day Styling**: The file contains the logic for the split-day or "changeover day" triangles.
    -   It uses a modern technique with inline SVG polygons. A `div` with the class `.wpbc-diagonal-el` containing an `<svg>` is placed in each cell.
    -   The CSS then controls the `display` of different `<polygon>` elements within the SVG to show either a vertical line or a diagonal line, based on whether the `.wpbc_change_over_triangle` class is present on a parent element.
    -   This is a highly flexible and scalable method for creating complex cell backgrounds without extra images or complicated CSS hacks.

-   **CSS Resets and Conflict Prevention**: The file includes numerous CSS resets to remove default margins, padding, and borders from all calendar elements. It also has specific rules to override theme styles (e.g., ` #content .datepick-days-cell { padding: 0; }`) and to fix browser-specific rendering bugs, such as a border-width issue in Chrome.

## Features Enabled

This file does not add any admin menu items, but it is entirely responsible for the visual presentation and functionality of the front-end calendar.

### Admin Menu

-   This file has no effect on the WordPress admin menu.

### User-Facing

-   **Responsive Calendar Grid**: It enables the multi-month calendar to display in a responsive grid that adapts to different screen sizes and container widths.
-   **Square Date Cells**: Ensures a clean, uniform calendar appearance by making all date cells square.
-   **Changeover Day Display**: Provides the underlying structure and styling for showing split-day availability (check-in/check-out days).
-   **Calendar Legend**: Styles the legend items that explain the meaning of different date colors.
-   **Tooltips**: Defines the structure and layout for the tooltips that show detailed information when a user hovers over a date.

## Extension Opportunities

-   **Safe Extension Method (Theming)**: The file defines a few CSS Custom Properties (variables) in the `:root` block, primarily for the legend (`--wpbc_cal_legend-day-cell-height`, etc.). The safest way to customize these values is to override them in your own custom stylesheet.

-   **Safe Extension Method (Overrides)**: For more significant visual changes, the recommended approach is to create a separate custom stylesheet, enqueue it after the plugin's styles, and use more specific CSS selectors to override the rules in this file. Direct modification is not recommended as it would be overwritten on plugin updates.

-   **Potential Risks**: The calendar layout is a complex system relying on Flexbox and specific class names. Modifying layout-related properties (`display`, `flex`, `width`, etc.) without a strong understanding of the existing structure could easily break the calendar grid and its responsive behavior.

## Next File Recommendations

This analysis completes the review of the core calendar styling. The next logical steps are to investigate the fundamental data structures of the plugin and the low-level JavaScript library that powers the calendar's interactivity.

1.  **`includes/page-resource-free/page-resource-free.php`**: This is the most important remaining un-analyzed file. It will explain how "booking resources"—the core "bookable" items in the plugin—are defined and managed, which is fundamental to the entire data model.
2.  **`js/datepick/jquery.datepick.wpbc.9.0.js`**: We have analyzed the high-level scripts, but this file is the core jQuery Datepick library that has been customized for the plugin. Analyzing it would provide a deep understanding of how the calendar UI is rendered and how date selection and styling are handled at a low level.
3.  **`css/skins/` (Directory)**: Since `calendar.css` is the base stylesheet, analyzing a few files from this directory (e.g., `premium-black.css` or `light.css`) would provide a complete picture of how the skinning system works to apply colors and final touches to the base layout.
