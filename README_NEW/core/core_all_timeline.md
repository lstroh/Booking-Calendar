Based on the provided sources, here is a detailed timeline of the main events and a cast of characters for the Booking Calendar plugin's architecture and operational flow.

Detailed Timeline of Main Events
The timeline details the sequence of architectural development, plugin lifecycle events, and the operational flow of a booking and administrative tasks.

Timeframe / ContextEvent / Architectural DevelopmentKey Components InvolvedDescriptionLegacy CompatibilityBackward Compatibility SetupEmail files (e.g., page-email-approved.php), wpbc_import6_... functionsLegacy email settings (e.g., booking_email_approval_content) are imported and transformed into the new Email API format to ensure a smooth upgrade path.Initial ActivationPlugin Activation and Lifecycle Startcore/any/activation.php (WPBC_Install), core/wpbc.php (Booking_Calendar)The plugin is installed. The WPBC_Install class orchestrates setup, sets the version (booking_version_num), and registers core hooks.Initial ActivationOnboarding and Admin Setupcore/any/activation.php, core/class/wpbc-class-welcome.phpA transient (_booking_activation_redirect) is set to redirect the administrator to the "What's New" page after activation, initiating the onboarding process.Initial ActivationCore Architecture Establishmentcore/wpbc-core.phpThe foundational layer is established, implementing the custom action/filter hook system (add_bk_action, apply_bk_filter) and data abstraction wrappers (get_bk_option).InitializationAdmin Menu & UI Framework Setupcore/any/class-admin-menu.php (WPBC_Admin_Menus)The menu factory registers all top-level and submenu pages (Bookings, Settings, Timeline), standardizing the backend structure and delegating content rendering via the wpbc_page_structure_show hook.InitializationSettings & Email API Definitioncore/any/class-admin-settings-api.php, core/any/api-emails.phpThe abstract frameworks for both settings (WPBC_Settings_API) and emails (WPBC_Emails_API) are established, requiring child classes to implement init_settings_fields().InitializationAsset Management and Conflict Preventioncore/wpbc-css.php, core/wpbc-js.php (WPBC_CSS, WPBC_JS)Asset controllers are defined. They enqueue styles/scripts conditionally, implement conflict removal (via wp_dequeue_style), and remove async/defer attributes from critical JS to prevent race conditions.InitializationTranslation Engine Setupcore/wpbc-translation.phpThe translation engine loads, detecting locale (checking Polylang/WPML/AJAX parameters) and initializing the custom inline translation system ([lang=xx_XX]).InitializationCustom Pseudo-Cron System Setupcore/lib/wpbc-cron.php (WPBC_Cron)The custom cron system is established, hooking into the WordPress init action (priority 9) to check for and execute due tasks based on website traffic.Admin Action: SettingsGeneral Settings Configurationcore/admin/api-settings.php (WPBC_Settings_API_General)The concrete class defines the complete catalog of General Settings fields, supporting dynamic UI logic via client-side jQuery (enqueue_js()).Admin Action: Sync SetupGoogle Calendar Sync Configurationcore/sync/wpbc-gcal.phpAn administrator configures the Google API Key and import schedule. The function wpbc_fields_after_saving_to_db__import_gcal() uses WPBC()->cron->update() to schedule the wpbc_silent_import_all_events action.Admin Action: Sync SetupICS Synchronization Setup (Delegated)core/admin/page-ics-import.php, page-ics-export.phpThe UI for ICS Import/Export is presented. Core parsing logic is delegated to the "Booking Manager" companion plugin via hooks like wpbm_ics_import_start.Front-End Action: SubmissionNew Booking Workflow Initiationcore/lib/wpdev-booking-class.php (wpdev_booking), core/form_parser.phpA user submits a booking via a shortcode. The form parser processes the raw configuration into a structured array, and the core booking function saves the data.Workflow: NotificationsAdmin New Booking Notificationcore/admin/page-email-new-admin.php (WPBC_Emails_API_NewAdmin)The system sends a notification to the administrator, including quick action shortcodes like [click2approve] and [click2decline].Workflow: NotificationsVisitor Confirmation Emailcore/admin/page-email-new-visitor.php (WPBC_Emails_API_NewVisitor)The system sends a confirmation email to the visitor.Admin Action: ManagementReal-time Booking Status Update (AJAX)core/lib/wpbc-ajax.phpAn administrator triggers a status change (e.g., Approve). The AJAX controller executes the action, checking for a Nonce (wpbc_check_nonce_in_admin_panel()), updating the database, and triggering post-event hooks (e.g., wpbc_booking_approved).Admin Action: ManagementUI Update via Inline JavaScriptcore/lib/wpbc-ajax.phpAfter a successful AJAX database update, the controller echoes an inline <script> block to dynamically update the administrator's UI (e.g., status label change) without a full page reload.Scheduled EventGoogle Calendar Sync Executioncore/lib/wpbc-cron.php, core/sync/wpbc-gcal.php, WPBC_Google_CalendarThe custom cron system triggers wpbc_silent_import_all_events(). This function configures and runs the WPBC_Google_Calendar engine, which fetches data via wp_remote_get() and calls wpbc_booking_save() to insert new bookings, preventing duplicates via sync_gid.Admin Action: ViewingBooking Data Visualization (Timeline)core/admin/page-timeline.php, core/timeline/v2/wpbc-class-timeline_v2.php (WPBC_TimelineFlex)The page controller loads the WPBC_TimelineFlex class, which fetches booking objects (via wpbc_get_bookings_objects()) and renders the complex, responsive Gantt-chart visualization using Flexbox and CSS Custom Properties.Admin Action: DebuggingAccessing Hidden System Toolscore/admin/wpbc-settings-functions.phpAn administrator or support staff accesses the hidden System Info / Debug panel by appending &system_info=show to the settings URL, enabling maintenance tasks like resetting forms.Plugin DeactivationLifecycle End and Cleanupcore/any/activation.php, core/lib/wpbc-cron.phpThe plugin is deactivated. If enabled by the user (booking_is_delete_if_deactive), the wpbc_deactivation hook fires, allowing modules to run cleanup routines (e.g., deleting GCal settings via wpbc_sync_gcal_deactivate()).Cast of Characters
This list includes the principal classes, files, and architectural entities mentioned across the sources, along with brief bios describing their role in the plugin.

Character / EntityTypeBrief BioBooking_CalendarPHP Class (Singleton)The main initializer and orchestrator of the entire plugin, defined in core/wpbc.php. It manages the plugin lifecycle, loads core dependencies, and initializes all major subsystems (menus, CSS, JS, cron).WPBC_Settings_API_GeneralPHP ClassThe blueprint designer for all general configuration settings. Defined in core/admin/api-settings.php, it contains the comprehensive catalog of fields via the init_settings_fields() method.WPBC_Admin_MenusPHP ClassThe factory responsible for registering all admin pages and submenus (e.g., "Bookings," "Settings"). It standardizes the menu structure and implements delegation for content rendering.WPBC_Emails_APIAbstract PHP ClassThe core messaging framework extended by all specific email templates. It enforces a standardized structure for defining email subjects, content, and sending logic.WPBC_Emails_API_NewAdminPHP ClassThe administrative messenger responsible for the "New Booking (admin)" email template. Its content is tailored with quick action shortcodes like [click2approve] and [click2decline].wpdev_bookingPHP Class (Controller)The main controller for the front-end. Defined in core/lib/wpdev-booking-class.php, it registers all primary shortcodes (e.g., [booking], [bookingcalendar]) and centralizes rendering logic, which is reused by the BookingWidget.WPBC_TimelineFlexPHP Class (Engine)The specialized data visualizer responsible for rendering the administrative "Timeline View" (Gantt chart). It processes complex date/time data and relies on a separate function (wpbc_get_bookings_objects()) for data fetching.WPBC_Google_CalendarPHP Class (Engine)The core engine for one-way Google Calendar synchronization. It handles API communication (wp_remote_get()), data parsing, duplicate prevention (sync_gid), and delegates final booking creation to wpbc_booking_save().WPBC_CronPHP Class (Scheduler)The custom pseudo-cron system manager, defined in core/lib/wpbc-cron.php. It bypasses WP-Cron, stores tasks in the booking_cron option, and executes them upon page load (init hook).core/lib/wpbc-ajax.phpPHP File (Controller)The central AJAX request router. It handles real-time administrative actions (approve, trash, delete) and front-end features (cost calculation), enforcing security via nonce checks.core/wpbc-core.phpPHP File (Foundation)Implements the plugin's internal custom hook system (add_bk_action, apply_bk_filter) and data abstraction wrappers (get_bk_option), crucial for internal modularity.core/form_parser.phpPHP File (Utility)The critical utility file that translates the administrator's raw, shortcode-like form configuration string into a structured PHP array for rendering and processing.core/wpbc-dev-api.phpPHP File (API)The official Developer API. It provides stable, programmatic functions (wpbc_api_booking_add_new, wpbc_api_is_dates_booked) for third-party developers, abstracting away complex internal data serialization.WPBC_Upgrader_Translation_SkinPHP ClassA custom skin extending WP_Upgrader_Skin. It provides a minimal, "silent" UI with customized messages for downloading and installing translation files non-disruptively.core/lib/index.phpSecurity FileA "silent index" containing only <?php // Silence is golden. ?>. Its sole purpose is security: to prevent unauthorized directory listing in internal plugin directories.Booking Manager PluginCompanion PluginA required, separate plugin (v2.1+) that holds the complex logic for advanced synchronization features, such as parsing ICS files for import, as delegated by the core plugin.$wpbc_booking_country_listGlobal VariableThe associative array used for the non-standard, file-based localization of the country list dropdown, defined in wpdev-country-list.php and overridden by locale-specific files.WPBC_NoticesPHP ClassThe system for managing and displaying persistent, dismissible administrative warnings (e.g., paid-to-free downgrade warning) only on specific plugin pages.

